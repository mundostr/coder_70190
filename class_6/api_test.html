<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
        <script src="https://kit.fontawesome.com/d26a5a3196.js" crossorigin="anonymous"></script>
        <title>API Test</title>
    </head>
    <body style="background-color: #333; color: #fff">
        <div class="container-fluid" style="padding: 1em">
            <p id="response_content"></p>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <script>
            // Código de prueba para solicitudes de autenticación y manejo de cookies
            const requestData = async (url, user, pass) => {
                const data = await fetch(url, {
                    method: 'POST',
                    body: JSON.stringify({ username: user, password: pass }),
                    headers: {
                        "Content-Type": "application/json"
                    },
                    credentials: 'include'
                });
                const jsonData = await data.json();
                console.log(jsonData);
                
                // localStorage.setItem('coder_token', JSON.stringify(jsonData.data.token));
                // const token = jsonData.data.token;

                /* const data2 = await fetch('http://localhost:5050/api/users/private2', {
                    method: 'GET',
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": `Bearer ${token}`
                    }
                });
                const jsonData2 = await data2.json();
                console.log(jsonData2); */

                /* const data2 = await fetch(`http://localhost:5050/api/users/private2?access_token=${token}`, {
                    method: 'GET',
                    headers: {
                        "Content-Type": "application/json"
                    }
                });
                const jsonData2 = await data2.json();
                console.log(jsonData2); */

                const data2 = await fetch(`http://localhost:5050/api/users/private2`, {
                    method: 'GET',
                    headers: {
                        "Content-Type": "application/json"
                    },
                    credentials: 'include'
                });
                const jsonData2 = await data2.json();
                console.log(jsonData2);
            };


            requestData('http://localhost:5050/api/users/jwtlogin', 'idux.net@gmail.com', 'abc123');
        </script>
    </body>
</html>
